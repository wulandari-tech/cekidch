<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wanzofc Request - Login</title>
    <style>
       body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #121212;
            color: #fff;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden; /* Prevent scrollbars */
        }

        .container {
            background-color: #1e1e1e;
            padding: 40px 60px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
            text-align: center;
            max-width: 400px;
            width: 90%;
            position: relative; /* For absolute positioning of elements */
            overflow: hidden;  /*  Hide overflowing particles/effects */
        }
        /* Title with subtle animation */
        h1 {
            font-size: 2.5em;
            margin-bottom: 0.7em;
            color: #f0f0f0;
            position: relative; /*  For the underline */
            display: inline-block; /*  Make underline width match text */

        }
         h1::after { /* Animated underline */
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;  /*  Thickness of the underline */
            background: linear-gradient(90deg, #00c4a7, #007acc); /*  Gradient */
            transform: scaleX(0);  /* Start with 0 width */
            transform-origin: center;
            transition: transform 0.4s ease-out;
        }
        h1:hover::after {
            transform: scaleX(1); /*  Expand to full width on hover */
        }


        input[type="text"],
        input[type="password"] {
            width: calc(100% - 40px); /*  Full width minus padding */
            padding: 15px 20px;
            margin-bottom: 20px;
            border: none;
            border-radius: 8px;
            background-color: #2a2a2a;
            color: #fff;
            font-size: 1em;
            transition: background-color 0.3s, box-shadow 0.3s; /*  Smooth transitions */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /*  Subtle shadow */
        }
        input[type="text"]:focus,
        input[type="password"]:focus {
            outline: none;
            background-color: #333;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /*  Slightly stronger shadow on focus */
        }



        button {
            background: linear-gradient(135deg, #00c4a7, #007acc); /*  Gradient button */
            color: #fff;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s; /*  Transitions */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /*  Shadow */
            text-transform: uppercase; /*  Uppercase text */
            letter-spacing: 1px;       /*  Slight spacing */
        }

        button:hover {
            transform: translateY(-2px);  /*  Slight lift */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4); /*  Stronger shadow on hover */
        }
         button:active {
            transform: translateY(0); /*  No lift on click */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);  /* Reduced shadow */
         }

        .signup-link {
            margin-top: 25px;
            color: #aaa;
            font-size: 0.9em;
        }

        .signup-link a {
            color: #00c4a7;
            text-decoration: none;
            font-weight: bold;
              transition: color 0.3s ease;
        }
        .signup-link a:hover{
             color: #007acc;
        }

        /* Error Message Styling */
        #error-message {
            color: #ff6b6b;  /*  Red color for errors */
            margin-top: 10px;
            font-size: 0.9em;
            display: none; /* Hidden by default */
        }


        /*  Parallax Background (Subtle) */
        .parallax-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /*  Make it non-interactive */
            z-index: -1; /*  Behind everything */
        }
        .parallax-layer {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        /* Example: A few circles as layers */
        .circle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
        }
        .circle-1 { background-color: #00c4a7; width: 150px; height: 150px; top: 20%; left: 10%; }
        .circle-2 { background-color: #007acc; width: 200px; height: 200px; bottom: 10%; right: 30%; }
        .circle-3 { background-color: #a855f7; width: 80px; height: 80px;  top: 60%; right: 10%; }
    </style>
</head>
<body>
    <div class="parallax-bg">
        <div class="parallax-layer circle circle-1"></div>
        <div class="parallax-layer circle circle-2"></div>
        <div class="parallax-layer circle circle-3"></div>
    </div>
    <div class="container">
        <h1>Wanzofc Request</h1>
        <input type="text" id="username" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button id="login-button">Login</button>
        <p class="signup-link">Belum punya akun? <a href="signup.html">Daftar</a></p>
        <p id="error-message"></p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const loginButton = document.getElementById('login-button');
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const errorMessage = document.getElementById('error-message');

            // GSAP Animations
             const tl = gsap.timeline({ defaults: { ease: "power2.out" } });

            // Animate the container's appearance
            tl.from(".container", { opacity: 0, y: 50, duration: 0.8 });

            // Staggered animation for inputs
            tl.from("input", { opacity: 0, y: -20, stagger: 0.2, duration: 0.5 }, "-=0.4");

            // Animate the button
            tl.from("button", { opacity: 0, scale: 0.8, duration: 0.5 }, "-=0.2");

            // Parallax effect (subtle)
            const parallaxBg = document.querySelector('.parallax-bg');
            document.addEventListener('mousemove', (e) => {
                const x = (e.clientX / window.innerWidth) * 50 - 25; // -25 to 25 range
                const y = (e.clientY / window.innerHeight) * 50 - 25;

                gsap.to('.parallax-layer', {
                    x: x,
                    y: y,
                    duration: 1.5, // Smooth the movement
                    ease: 'power3.out'
                });
            });

            // Login Logic
              loginButton.addEventListener('click', async () => {
                const username = usernameInput.value;
                const password = passwordInput.value;

                if (!username || !password) {
                    showError('Harap isi semua field.');
                    return;
                }

                try {
                    const response = await fetch('/login', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ username, password }),
                    });

                    if (response.ok) {
                        const data = await response.json();
                         // Simpan token di localStorage (atau sessionStorage)
                        localStorage.setItem('token', data.token);
                        window.location.href = 'request.html'; //  Redirect
                    } else {
                        const errorData = await response.json();
                        showError(errorData.message);
                    }
                } catch (error) {
                    console.error('Error during login:', error);
                    showError('Terjadi kesalahan. Coba lagi.');
                }
            });

            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
                gsap.fromTo(errorMessage, { opacity: 0, y: -10 }, { opacity: 1, y: 0, duration: 0.5 }); // Fade in
            }

             //  Hide error message on input change
            usernameInput.addEventListener('input', hideError);
            passwordInput.addEventListener('input', hideError);

            function hideError() {
                 if (errorMessage.style.display === 'block') {
                    gsap.to(errorMessage, {
                        opacity: 0,
                        y: -10,
                        duration: 0.3,
                        onComplete: () => {
                            errorMessage.style.display = 'none';
                        }
                    });
                }
            }

        });
    </script>
</body>
</html>
